box: nodesource/trusty
build:
  steps:
    - wercker/npm-install
    - script:
        name: echo nodejs information
        code: |
          echo "node version $(node -v) running"
          echo "npm version $(npm -v) running"

    - script:
      name: Run npm run build
      code: |
        npm run build

deploy:
  steps:
    - install-packages:
        packages: git ssh-client liberror-perl
     - leipert/git-push:
        gh_oauth: $GITHUB_TOKEN
        repo: growthbeat/api
        branch: gh-pages
        basedir: public

stg-deploy:
  steps:
    - s3sync:
        key-id: $KEY
        key-secret: $SECRET
        bucket-url: $BUCKET
        source-dir: public
        opts: --acl-private